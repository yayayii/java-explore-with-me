create table if not exists category (
    id bigint generated by default as identity primary key,
    name varchar(50) unique
);

create table if not exists user_account (
    id bigint generated by default as identity primary key,
    name varchar(250),
    email varchar(254) unique
);

create table if not exists event (
    id bigint generated by default as identity primary key,
    title varchar(120),
    annotation varchar(2000),
    description varchar(7000),
    paid bool,
    request_moderation bool,
    category_id bigint references category,
    location_lat float,
    location_lon float,
    participant_limit int,
    created_on timestamp with time zone,
    event_date timestamp with time zone,
    published_on timestamp with time zone,
    initiator_id bigint references user_account,
    state varchar
);

create table if not exists event_request (
    id bigint generated by default as identity primary key,
    event_id bigint references event,
    requester_id bigint references user_account,
    status varchar,
    created timestamp with time zone
);

create table if not exists compilation (
    id bigint generated by default as identity primary key,
    title varchar(50),
    pinned bool
);

create table if not exists event_compilation (
    event_id bigint references event,
    compilation_id bigint references compilation,
    primary key (event_id, compilation_id)
);

create table if not exists comment (
    id bigint generated by default as identity primary key,
    text varchar(250),
    event_id int references event,
    author_id int references user_account,
    created timestamp with time zone
);
